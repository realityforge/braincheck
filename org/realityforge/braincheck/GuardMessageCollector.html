<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>GuardMessageCollector (Braincheck API Documentation)</title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="GuardMessageCollector (Braincheck API Documentation)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../org/realityforge/braincheck/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/realityforge/braincheck/BrainCheckTestUtil.OnGuardListener.html" title="interface in org.realityforge.braincheck"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/realityforge/braincheck/Guards.html" title="class in org.realityforge.braincheck"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/realityforge/braincheck/GuardMessageCollector.html" target="_top">Frames</a></li>
<li><a href="GuardMessageCollector.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.realityforge.braincheck</div>
<h2 title="Class GuardMessageCollector" class="title">Class GuardMessageCollector</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.realityforge.braincheck.GuardMessageCollector</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@GwtIncompatible
public final class <a href="../../../src-html/org/realityforge/braincheck/GuardMessageCollector.html#line.91">GuardMessageCollector</a>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">This class is used by test infrastructure to collect and match all invocations invariant checks
 in the <a href="../../../org/realityforge/braincheck/Guards.html" title="class in org.realityforge.braincheck"><code>Guards</code></a> class. This class will be invoked any time <a href="../../../org/realityforge/braincheck/Guards.html#invariant-java.util.function.Supplier-java.util.function.Supplier-"><code>Guards.invariant(Supplier, Supplier)</code></a>
 is invoked or <a href="../../../org/realityforge/braincheck/Guards.html#apiInvariant-java.util.function.Supplier-java.util.function.Supplier-"><code>Guards.apiInvariant(Supplier, Supplier)</code></a> is invoked and will receive the message. If
 the message matches the pattern <code>"[Key]-####: [Message]"</code> and this class has been configured to
 match <code>Key</code> message then this message will be recorded or matched against predefined message template.

 <p>The message templates are recorded in a json file. The json contains an array of entries of the
 form belows. The <code>messagePattern</code> property can also include the value <code>%s</code> which
 is replaced with <code>.*</code> which can be replaced by any string during matching.</p>

 <pre>
     {
     "code": 1,
     "type": "API_INVARIANT",
     "messagePattern": "Invoked Arez.createZone() but zones are not enabled.",
     "callers": [
       {
         "class": "arez.Arez",
         "method": "createZone",
         "file": "Arez.java",
         "lineNumber": 185
       }
     ]
   }
 </pre>

 <p>The class makes a few assumptions. It assumes that every invariant message with the specified
 <code>key</code> is invoked while the collector is active and thus if a message does not occur that
 it no longer exists. It also assumes that only invariant messages that match the above pattern are
 of interest.</p>

 <p>To enable this class it is typical to hook it into appropriate places according to your test
 framework of choice. In TestNG the base test class may look like:</p>

 <pre>
 public abstract class AbstractTest
 {
   private static final GuardMessageCollector c_messages = createCollector();

   <code> @</code>BeforeSuite
   protected void beforeSuite() { c_messages.onTestSuiteStart(); }

   <code> @</code>BeforeMethod
   protected void beforeTest() { c_messages.onTestStart(); }

   <code> @</code>AfterMethod
   protected void afterTest() { c_messages.onTestComplete(); }

   <code> @</code>AfterSuite
   protected void afterSuite() { c_messages.onTestSuiteComplete(); }

   private static GuardMessageCollector createCollector() { ... }
 }
 </pre>

 <p>The primary purpose of the class is to enable the validation and collection of invariant checks
 for the purpose of documentation. The output file includes the invariant pattern as well as the
 location in the source file where the invariant checks are generated. This makes it easy to
 generate errors with cross references as required.</p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../org/realityforge/braincheck/GuardMessageCollector.html#GuardMessageCollector-java.lang.String-java.io.File-boolean-">GuardMessageCollector</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;key,
                     <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;file,
                     boolean&nbsp;saveIfChanged)</code>
<div class="block">Create the collector.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/realityforge/braincheck/GuardMessageCollector.html#getMatchFailureCount--">getMatchFailureCount</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/realityforge/braincheck/GuardMessageCollector.html#onTestComplete--">onTestComplete</a></span>()</code>
<div class="block">Hook method that should be invoked after a test completes.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/realityforge/braincheck/GuardMessageCollector.html#onTestStart--">onTestStart</a></span>()</code>
<div class="block">Hook method that should be invoked before a test starts.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/realityforge/braincheck/GuardMessageCollector.html#onTestSuiteComplete--">onTestSuiteComplete</a></span>()</code>
<div class="block">Hook method that should be invoked after all tests have completed.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/realityforge/braincheck/GuardMessageCollector.html#onTestSuiteStart--">onTestSuiteStart</a></span>()</code>
<div class="block">Hook method that should be invoked before any test starts.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="GuardMessageCollector-java.lang.String-java.io.File-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>GuardMessageCollector</h4>
<pre>public&nbsp;<a href="../../../src-html/org/realityforge/braincheck/GuardMessageCollector.html#line.110">GuardMessageCollector</a>(<a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a> <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;key,
                             <a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a> <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;file,
                             boolean&nbsp;saveIfChanged)</pre>
<div class="block">Create the collector.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - the key/prefix used when selecting messages to match.</dd>
<dd><code>file</code> - the file expected to contain message templates. This file need not exist if <code>saveIfChanged</code> is <code>true</code>.</dd>
<dd><code>saveIfChanged</code> - flag set to true if changed message templates should be saved to <code>file</code>.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getMatchFailureCount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMatchFailureCount</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../src-html/org/realityforge/braincheck/GuardMessageCollector.html#line.119">getMatchFailureCount</a>()</pre>
</li>
</ul>
<a name="onTestSuiteStart--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onTestSuiteStart</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../src-html/org/realityforge/braincheck/GuardMessageCollector.html#line.128">onTestSuiteStart</a>()</pre>
<div class="block">Hook method that should be invoked before any test starts.
 This method will load the message templates if the file exists otherwise it will just reset internal state.</div>
</li>
</ul>
<a name="onTestStart--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onTestStart</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../src-html/org/realityforge/braincheck/GuardMessageCollector.html#line.137">onTestStart</a>()</pre>
<div class="block">Hook method that should be invoked before a test starts.</div>
</li>
</ul>
<a name="onTestComplete--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onTestComplete</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../src-html/org/realityforge/braincheck/GuardMessageCollector.html#line.145">onTestComplete</a>()</pre>
<div class="block">Hook method that should be invoked after a test completes.</div>
</li>
</ul>
<a name="onTestSuiteComplete--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>onTestSuiteComplete</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../src-html/org/realityforge/braincheck/GuardMessageCollector.html#line.156">onTestSuiteComplete</a>()</pre>
<div class="block">Hook method that should be invoked after all tests have completed.
 If the expected invariant invocations no longer match the actual invariant invocations
 then this method will either save the new message template or generate an exception depending
 on the value of the <code>saveIfChanged</code> used to create this class.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../org/realityforge/braincheck/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/realityforge/braincheck/BrainCheckTestUtil.OnGuardListener.html" title="interface in org.realityforge.braincheck"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/realityforge/braincheck/Guards.html" title="class in org.realityforge.braincheck"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/realityforge/braincheck/GuardMessageCollector.html" target="_top">Frames</a></li>
<li><a href="GuardMessageCollector.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
